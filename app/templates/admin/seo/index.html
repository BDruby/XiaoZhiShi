{% extends "admin/base.html" %}

{% block title %}SEO设置 - 管理后台{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <div class="md:flex md:items-center md:justify-between mb-6">
        <div class="flex-1 min-w-0">
            <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
                SEO设置
            </h2>
        </div>
    </div>

    <div class="bg-white shadow rounded-lg p-6">
        <form method="POST" action="{{ url_for('admin_seo.update') }}">
            <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                <!-- 基本SEO设置 -->
                <div class="sm:col-span-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">基本SEO设置</h3>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">站点标题</label>
                    <input type="text" name="site_title" value="{{ seo_setting.site_title or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">站点的默认标题</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">站点描述</label>
                    <textarea name="site_description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">{{ seo_setting.site_description or '' }}</textarea>
                    <p class="mt-1 text-sm text-gray-500">站点的默认描述，用于搜索引擎结果页面</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">站点关键词</label>
                    <input type="text" name="site_keywords" value="{{ seo_setting.site_keywords or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">站点的默认关键词，多个关键词用逗号分隔</p>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">站点作者</label>
                    <input type="text" name="site_author" value="{{ seo_setting.site_author or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Twitter账号</label>
                    <input type="text" name="twitter_handle" value="{{ seo_setting.twitter_handle or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <!-- 社交媒体和图片 -->
                <div class="sm:col-span-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 mt-6">社交媒体和图片</h3>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">站点Logo</label>
                    <input type="text" name="site_logo" value="{{ seo_setting.site_logo or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">Logo图片URL</p>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Favicon</label>
                    <input type="text" name="favicon" value="{{ seo_setting.favicon or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">站点图标URL</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">默认OG图片</label>
                    <input type="text" name="og_image" value="{{ seo_setting.og_image or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">默认的Open Graph图片URL，用于社交媒体分享</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">社交媒体链接</label>
                    <textarea name="social_media_links" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">{{ seo_setting.social_media_links or '' }}</textarea>
                    <p class="mt-1 text-sm text-gray-500">社交媒体链接，JSON格式存储</p>
                </div>
                
                <!-- 分析和跟踪 -->
                <div class="sm:col-span-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 mt-6">分析和跟踪</h3>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Google Analytics ID</label>
                    <input type="text" name="google_analytics_id" value="{{ seo_setting.google_analytics_id or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">百度统计ID</label>
                    <input type="text" name="baidu_analytics_id" value="{{ seo_setting.baidu_analytics_id or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                
                <!-- 高级设置 -->
                <div class="sm:col-span-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 mt-6">高级设置</h3>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">自定义<head>代码</label>
                    <textarea name="custom_head_code" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm">{{ seo_setting.custom_head_code or '' }}</textarea>
                    <p class="mt-1 text-sm text-gray-500">在<head>标签中插入的自定义代码</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Robots.txt</label>
                    <textarea name="robots_txt" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm">{{ seo_setting.robots_txt or '' }}</textarea>
                    <p class="mt-1 text-sm text-gray-500">Robots.txt文件内容。留空将使用自动生成的内容（包含对 /admin/, /login, /logout, /register, /dashboard 等后台路径的Disallow规则）。</p>
                </div>
                
                <div class="sm:col-span-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Sitemap URL</label>
                    <input type="text" name="sitemap_url" value="{{ seo_setting.sitemap_url or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">Sitemap URL。通常为 /sitemap.xml</p>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Sitemap最后修改时间</label>
                    <input type="text" value="{{ seo_setting.sitemap_lastmod.strftime('%Y-%m-%d %H:%M:%S') if seo_setting.sitemap_lastmod else '未生成' }}" readonly class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100">
                    <p class="mt-1 text-sm text-gray-500">Sitemap.xml最后生成时间</p>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Robots.txt最后修改时间</label>
                    <input type="text" value="{{ seo_setting.robots_txt_lastmod.strftime('%Y-%m-%d %H:%M:%S') if seo_setting.robots_txt_lastmod else '未生成' }}" readonly class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100">
                    <p class="mt-1 text-sm text-gray-500">Robots.txt最后生成时间</p>
                </div>
                
                <div class="sm:col-span-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">默认规范URL</label>
                    <input type="text" name="default_canonical_url" value="{{ seo_setting.default_canonical_url or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    <p class="mt-1 text-sm text-gray-500">默认规范URL，用于防止重复内容问题</p>
                </div>
            </div>
            
            <div class="mt-8 flex justify-end">
                <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    保存设置
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}